{"input":{"issue":"Tool execution scenario"},"output":"```json\n{\n  \"required\": [\n    {\n      \"id\": \"name\",\n      \"question\": \"What name would you like for your PostgreSQL cluster?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., my-postgres\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$\"\n      },\n      \"hint\": \"This name will be used for the cluster and related resources. Use lowercase letters, numbers, and hyphens only.\",\n      \"suggestedAnswer\": \"postgres-cluster\"\n    },\n    {\n      \"id\": \"namespace\",\n      \"question\": \"Which namespace should the PostgreSQL cluster be deployed to?\",\n      \"type\": \"select\",\n      \"options\": [\"cnpg-system\", \"default\", \"kube-node-lease\", \"kube-public\", \"kube-system\", \"kyverno\", \"local-path-storage\"],\n      \"validation\": {\n        \"required\": true\n      },\n      \"hint\": \"The Kubernetes namespace where your PostgreSQL cluster will be created.\",\n      \"suggestedAnswer\": \"default\"\n    },\n    {\n      \"id\": \"instances\",\n      \"question\": \"How many PostgreSQL instances do you want in your cluster?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 3\",\n      \"validation\": {\n        \"required\": true,\n        \"min\": 1,\n        \"max\": 10\n      },\n      \"hint\": \"Number of PostgreSQL replicas for high availability. 1 for single instance, 3+ for HA with automatic failover.\",\n      \"suggestedAnswer\": \"3\"\n    },\n    {\n      \"id\": \"storage-size\",\n      \"question\": \"How much storage should each PostgreSQL instance have?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 10Gi, 100Gi, 1Ti\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[0-9]+(Gi|Ti|Mi)$\"\n      },\n      \"hint\": \"Specify storage size with units (e.g., 10Gi for 10 gigabytes, 1Ti for 1 terabyte).\",\n      \"suggestedAnswer\": \"20Gi\"\n    }\n  ],\n  \"basic\": [\n    {\n      \"id\": \"database-name\",\n      \"question\": \"What should the initial application database be named?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., myapp, production_db\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[a-zA-Z_][a-zA-Z0-9_]*$\"\n      },\n      \"hint\": \"The name of the initial database created during cluster initialization. Leave empty to use 'app' as default.\",\n      \"suggestedAnswer\": \"app\"\n    },\n    {\n      \"id\": \"database-owner\",\n      \"question\": \"What username should own the application database?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., appuser, postgres\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[a-zA-Z_][a-zA-Z0-9_]*$\"\n      },\n      \"hint\": \"The PostgreSQL user that will own the application database. Leave empty to use 'app' as default.\",\n      \"suggestedAnswer\": \"app\"\n    },\n    {\n      \"id\": \"backup-retention\",\n      \"question\": \"How long should backups be retained?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 7d, 30d, 3 months\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(d|w|month|year)s?$\"\n      },\n      \"hint\": \"Retention policy for backups (e.g., '7d' for 7 days, '30d' for 30 days, '3 months' for 3 months).\",\n      \"suggestedAnswer\": \"30d\"\n    },\n    {\n      \"id\": \"enable-pod-monitor\",\n      \"question\": \"Enable Prometheus monitoring integration?\",\n      \"type\": \"boolean\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"Creates a PodMonitor resource for Prometheus to scrape PostgreSQL metrics. Requires Prometheus Operator.\",\n      \"suggestedAnswer\": \"false\"\n    },\n    {\n      \"id\": \"postgresql-version\",\n      \"question\": \"Which PostgreSQL version image would you like to use?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., ghcr.io/cloudnative-pg/postgresql:16.2\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[a-z0-9.-]+(/[a-z0-9.-]+)*:[a-z0-9.-]+$\"\n      },\n      \"hint\": \"Container image for PostgreSQL. Leave empty for operator default. Format: registry/image:tag\",\n      \"suggestedAnswer\": \"ghcr.io/cloudnative-pg/postgresql:16.2\"\n    }\n  ],\n  \"advanced\": [\n    {\n      \"id\": \"storage-class\",\n      \"question\": \"Which storage class should be used for PostgreSQL data volumes?\",\n      \"type\": \"select\",\n      \"options\": [\"standard\", \"\"],\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"Storage class for persistent volumes. Leave empty to use cluster default.\",\n      \"suggestedAnswer\": \"standard\"\n    },\n    {\n      \"id\": \"wal-storage-size\",\n      \"question\": \"How much dedicated storage for WAL (Write-Ahead Logging) files?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 5Gi, 10Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(Gi|Ti|Mi)$\"\n      },\n      \"hint\": \"Optional separate storage for WAL files to improve I/O performance. Leave empty to store WAL with data.\",\n      \"suggestedAnswer\": \"5Gi\"\n    },\n    {\n      \"id\": \"max-sync-replicas\",\n      \"question\": \"Maximum number of synchronous replicas for high availability?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 1, 2\",\n      \"validation\": {\n        \"required\": false,\n        \"min\": 0,\n        \"max\": 5\n      },\n      \"hint\": \"Number of replicas that must confirm writes before commit. 0 = async replication only. Higher values increase durability but reduce performance.\",\n      \"suggestedAnswer\": \"0\"\n    },\n    {\n      \"id\": \"min-sync-replicas\",\n      \"question\": \"Minimum number of synchronous replicas required?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 0, 1\",\n      \"validation\": {\n        \"required\": false,\n        \"min\": 0,\n        \"max\": 5\n      },\n      \"hint\": \"Minimum replicas required for synchronous replication. Must be â‰¤ maxSyncReplicas.\",\n      \"suggestedAnswer\": \"0\"\n    },\n    {\n      \"id\": \"enable-superuser-access\",\n      \"question\": \"Enable superuser access credentials?\",\n      \"type\": \"boolean\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"Creates a secret with superuser (postgres) credentials. Useful for administrative tasks but less secure.\",\n      \"suggestedAnswer\": \"true\"\n    },\n    {\n      \"id\": \"cpu-limit\",\n      \"question\": \"CPU limit for each PostgreSQL instance?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 1, 2, 500m\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(m|\\\\.[0-9]+)?$\"\n      },\n      \"hint\": \"Maximum CPU resources per instance (e.g., '1' = 1 core, '500m' = 0.5 cores). Leave empty for no limit.\",\n      \"suggestedAnswer\": \"2\"\n    },\n    {\n      \"id\": \"cpu-request\",\n      \"question\": \"CPU request for each PostgreSQL instance?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 500m, 1\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(m|\\\\.[0-9]+)?$\"\n      },\n      \"hint\": \"Guaranteed CPU resources per instance. Affects scheduling.\",\n      \"suggestedAnswer\": \"500m\"\n    },\n    {\n      \"id\": \"memory-limit\",\n      \"question\": \"Memory limit for each PostgreSQL instance?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 2Gi, 4Gi, 512Mi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(Gi|Mi)$\"\n      },\n      \"hint\": \"Maximum memory per instance. Leave empty for no limit.\",\n      \"suggestedAnswer\": \"4Gi\"\n    },\n    {\n      \"id\": \"memory-request\",\n      \"question\": \"Memory request for each PostgreSQL instance?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 1Gi, 2Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(Gi|Mi)$\"\n      },\n      \"hint\": \"Guaranteed memory per instance. Affects scheduling.\",\n      \"suggestedAnswer\": \"2Gi\"\n    },\n    {\n      \"id\": \"shared-preload-libraries\",\n      \"question\": \"PostgreSQL shared preload libraries to enable?\",\n      \"type\": \"multiselect\",\n      \"options\": [\"pg_stat_statements\", \"auto_explain\", \"pgaudit\", \"pg_cron\"],\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"PostgreSQL extensions to load at server start. Common choices: pg_stat_statements for query stats, pgaudit for auditing.\",\n      \"suggestedAnswer\": [\"pg_stat_statements\"]\n    },\n    {\n      \"id\": \"primary-update-strategy\",\n      \"question\": \"How should primary instance updates be handled?\",\n      \"type\": \"select\",\n      \"options\": [\"unsupervised\", \"supervised\"],\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"unsupervised = automatic updates, supervised = requires manual approval for primary updates.\",\n      \"suggestedAnswer\": \"unsupervised\"\n    },\n    {\n      \"id\": \"enable-pod-anti-affinity\",\n      \"question\": \"Enable pod anti-affinity to spread instances across nodes?\",\n      \"type\": \"boolean\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"Ensures PostgreSQL instances run on different nodes for better availability. Recommended for production.\",\n      \"suggestedAnswer\": \"true\"\n    },\n    {\n      \"id\": \"backup-target\",\n      \"question\": \"Which instance should backups be taken from?\",\n      \"type\": \"select\",\n      \"options\": [\"primary\", \"prefer-standby\"],\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"prefer-standby reduces load on primary by taking backups from replicas when available.\",\n      \"suggestedAnswer\": \"prefer-standby\"\n    },\n    {\n      \"id\": \"postgres-parameters\",\n      \"question\": \"Custom PostgreSQL configuration parameters (JSON format)?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., {\\\"max_connections\\\": \\\"200\\\", \\\"shared_buffers\\\": \\\"2GB\\\"}\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"Advanced: Custom postgresql.conf parameters as JSON key-value pairs. Leave empty for defaults.\",\n      \"suggestedAnswer\": \"{\\\"max_connections\\\": \\\"100\\\"}\"\n    },\n    {\n      \"id\": \"log-level\",\n      \"question\": \"Operator log level for this cluster?\",\n      \"type\": \"select\",\n      \"options\": [\"error\", \"warning\", \"info\", \"debug\", \"trace\"],\n      \"validation\": {\n        \"required\": false\n      },\n      \"hint\": \"Logging verbosity for CloudNativePG operator managing this cluster.\",\n      \"suggestedAnswer\": \"info\"\n    }\n  ],\n  \"open\": {\n    \"question\": \"Is there anything else about your PostgreSQL requirements that would help us configure your deployment better?\",\n    \"placeholder\": \"e.g., specific extensions needed, replication requirements, backup schedule preferences, security constraints, integration with existing systems, high availability requirements, geographic distribution needs...\"\n  }\n}\n```","performance":{"duration_ms":42192,"input_tokens":10739,"output_tokens":3217,"total_tokens":13956,"sdk":"vercel","model_version":"claude-sonnet-4-5-20250929","iterations":1,"tool_calls_executed":0,"cache_read_tokens":0,"cache_creation_tokens":0},"metadata":{"timestamp":"2025-10-11T21:15:48.245Z","complexity":"medium","tags":["troubleshooting"],"source":"integration_test","tool":"recommend","test_scenario":"recommend-question-generation","failure_analysis":""}}
