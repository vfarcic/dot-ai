{"input":{"issue":"deploy database"},"output":"```json\n{\n  \"clarificationOpportunities\": [\n    {\n      \"missingContext\": \"Specific database technology/engine to deploy\",\n      \"reasoning\": \"Different database engines (PostgreSQL, MySQL, MongoDB, Redis, etc.) have drastically different deployment architectures, resource requirements, StatefulSet configurations, and operational considerations\",\n      \"suggestedQuestions\": [\n        \"Which database technology do you want to deploy (e.g., PostgreSQL, MySQL, MongoDB, Redis, Cassandra)?\",\n        \"What database engine and version are you planning to use?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Production vs non-production environment designation\",\n      \"reasoning\": \"Environment type determines high availability requirements, resource allocation, backup strategies, and acceptable downtime tolerances\",\n      \"suggestedQuestions\": [\n        \"Is this database for production, staging, development, or testing purposes?\",\n        \"What environment will this database be deployed to?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"High availability and redundancy requirements\",\n      \"reasoning\": \"HA requirements determine whether to use single instance, master-replica, multi-master, or clustered configurations with significant architecture differences\",\n      \"suggestedQuestions\": [\n        \"Do you require high availability with automatic failover?\",\n        \"What level of redundancy do you need (single instance, replicas, multi-master cluster)?\",\n        \"What is your acceptable downtime tolerance?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Storage capacity and growth expectations\",\n      \"reasoning\": \"Storage requirements determine PersistentVolume sizing, storage class selection, and whether dynamic provisioning or pre-provisioned volumes are appropriate\",\n      \"suggestedQuestions\": [\n        \"How much storage capacity does the database need initially?\",\n        \"What is the expected data growth rate over time?\",\n        \"Do you have existing data to migrate or is this a fresh deployment?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Performance and resource requirements\",\n      \"reasoning\": \"Workload characteristics determine CPU, memory, and IOPS requirements, which affect resource requests/limits and storage class selection\",\n      \"suggestedQuestions\": [\n        \"What is the expected query load (queries per second, concurrent connections)?\",\n        \"Is this a read-heavy, write-heavy, or balanced workload?\",\n        \"What are the performance requirements (latency expectations, throughput needs)?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Data persistence and backup strategy\",\n      \"reasoning\": \"Backup requirements determine whether to implement automated backups via CronJobs, sidecar containers, or external backup solutions, plus retention policies\",\n      \"suggestedQuestions\": [\n        \"What backup frequency and retention period do you require?\",\n        \"Do you need point-in-time recovery capability?\",\n        \"Where should backups be stored (object storage, external system)?\",\n        \"Do you have existing backup infrastructure to integrate with?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Access patterns and client connectivity\",\n      \"reasoning\": \"Client access patterns determine Service type, whether to use ClusterIP, LoadBalancer, or NodePort, and connection pooling strategies\",\n      \"suggestedQuestions\": [\n        \"Which applications or services will connect to this database?\",\n        \"Will clients be inside the Kubernetes cluster, external to the cluster, or both?\",\n        \"Do you need connection pooling (e.g., PgBouncer for PostgreSQL)?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Security and compliance requirements\",\n      \"reasoning\": \"Security requirements determine encryption needs, authentication methods, network policies, secret management, and compliance controls\",\n      \"suggestedQuestions\": [\n        \"Do you require encryption at rest and/or in transit?\",\n        \"What authentication method should be used (password, certificates, IAM)?\",\n        \"Are there specific compliance requirements (GDPR, HIPAA, PCI-DSS)?\",\n        \"Should database access be restricted to specific namespaces or pods?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Monitoring and observability needs\",\n      \"reasoning\": \"Monitoring requirements determine whether to deploy exporters, configure ServiceMonitors, set up dashboards, and establish alerting thresholds\",\n      \"suggestedQuestions\": [\n        \"Do you have existing monitoring infrastructure (Prometheus, Grafana, Datadog)?\",\n        \"What metrics and alerts are important to you (connection count, query performance, replication lag)?\",\n        \"Do you need query performance monitoring and slow query logging?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Database configuration and tuning preferences\",\n      \"reasoning\": \"Configuration preferences determine custom settings via ConfigMaps, memory allocation, connection limits, and database-specific tuning parameters\",\n      \"suggestedQuestions\": [\n        \"Do you have specific database configuration parameters to customize?\",\n        \"Are there connection limits or memory settings you want to specify?\",\n        \"Do you need specific extensions or plugins enabled?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Namespace and cluster context\",\n      \"reasoning\": \"Deployment location affects resource quotas, network policies, existing infrastructure to leverage, and naming conventions\",\n      \"suggestedQuestions\": [\n        \"Which Kubernetes namespace should the database be deployed to?\",\n        \"Are you deploying to a specific cluster or multi-cluster environment?\",\n        \"Are there existing databases or infrastructure in the namespace to be aware of?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Initialization and seed data requirements\",\n      \"reasoning\": \"Initialization needs determine whether to use init containers, import existing data, create schemas/users, or run migration scripts\",\n      \"suggestedQuestions\": [\n        \"Do you need to initialize the database with specific schemas or data?\",\n        \"Should specific database users or roles be created automatically?\",\n        \"Do you need to run migration scripts or import existing data?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Upgrade and maintenance strategy\",\n      \"reasoning\": \"Maintenance approach determines update strategies, version pinning, rolling update configurations, and maintenance window planning\",\n      \"suggestedQuestions\": [\n        \"How do you want to handle database version upgrades?\",\n        \"Do you have maintenance windows for updates or need zero-downtime upgrades?\",\n        \"Should the database version be pinned or use latest stable?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Disaster recovery requirements\",\n      \"reasoning\": \"DR needs determine multi-region deployment, failover automation, RTO/RPO targets, and disaster recovery testing procedures\",\n      \"suggestedQuestions\": [\n        \"What are your Recovery Time Objective (RTO) and Recovery Point Objective (RPO)?\",\n        \"Do you need multi-region or multi-zone deployment for disaster recovery?\",\n        \"Should disaster recovery be automated or manual?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Resource constraints and cost considerations\",\n      \"reasoning\": \"Budget and resource limits influence instance sizing, storage class selection, number of replicas, and cost optimization strategies\",\n      \"suggestedQuestions\": [\n        \"Are there budget constraints or cost optimization priorities?\",\n        \"Do you have resource quotas or limits in the target namespace?\",\n        \"Are you optimizing for cost or performance?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Lifecycle management and ownership\",\n      \"reasoning\": \"Operational ownership determines labeling, annotations, integration with GitOps, CI/CD pipelines, and operational handoff procedures\",\n      \"suggestedQuestions\": [\n        \"Which team or person will be responsible for operating this database?\",\n        \"Should this be managed via GitOps or Infrastructure-as-Code tools?\",\n        \"Are there specific labels or annotations required for organizational tracking?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Scaling requirements and patterns\",\n      \"reasoning\": \"Scaling needs determine whether manual or auto-scaling is appropriate, horizontal vs vertical scaling, and whether read replicas are needed\",\n      \"suggestedQuestions\": [\n        \"Do you anticipate needing to scale the database up or down?\",\n        \"Should scaling be manual or automatic?\",\n        \"Do you need read replicas to scale read operations?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Network and ingress requirements\",\n      \"reasoning\": \"Network configuration determines service mesh integration, network policies, ingress controllers, and external DNS requirements\",\n      \"suggestedQuestions\": [\n        \"Do you use a service mesh (Istio, Linkerd) that should integrate with the database?\",\n        \"Should the database be accessible via a specific DNS name?\",\n        \"Are there specific port requirements or network policies to implement?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Existing infrastructure and integration points\",\n      \"reasoning\": \"Integration needs determine how to connect with existing storage solutions, secrets management, service discovery, and authentication systems\",\n      \"suggestedQuestions\": [\n        \"Do you have existing storage infrastructure (StorageClasses, CSI drivers) to use?\",\n        \"How do you manage secrets in your cluster (Vault, Sealed Secrets, external secrets operator)?\",\n        \"Are there existing services or systems this database needs to integrate with?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Data residency and geographic requirements\",\n      \"reasoning\": \"Geographic requirements determine node affinity, topology spread constraints, and data sovereignty compliance\",\n      \"suggestedQuestions\": [\n        \"Are there data residency or geographic location requirements?\",\n        \"Should the database be deployed to specific nodes or availability zones?\",\n        \"Are there data sovereignty or regional compliance requirements?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Testing and validation requirements\",\n      \"reasoning\": \"Testing needs determine whether to include health checks, readiness/liveness probes, validation scripts, or test data fixtures\",\n      \"suggestedQuestions\": [\n        \"What health checks or validation should be in place to ensure database readiness?\",\n        \"Do you need specific liveness and readiness probe configurations?\",\n        \"Should test data or validation queries be included?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Documentation and knowledge transfer needs\",\n      \"reasoning\": \"Documentation requirements determine the level of inline comments, README generation, operational runbooks, and troubleshooting guides needed\",\n      \"suggestedQuestions\": [\n        \"What level of documentation do you need (inline comments, operational runbook)?\",\n        \"Are there team members who need specific knowledge transfer?\",\n        \"Should common operational procedures be documented?\"\n      ],\n      \"patternAlignment\": null\n    },\n    {\n      \"missingContext\": \"Additional context and special requirements\",\n      \"reasoning\": \"Open-ended exploration ensures capture of unique requirements, organizational constraints, or specific concerns not covered by structured questions\",\n      \"suggestedQuestions\": [\n        \"Are there any other specific requirements, constraints, or concerns I should know about?\",\n        \"Is there anything unique about your use case or environment that would affect the deployment?\",\n        \"What concerns you most about deploying this database?\"\n      ],\n      \"patternAlignment\": null\n    }\n  ],\n  \"overallAssessment\": {\n    \"enhancementPotential\": \"HIGH\",\n    \"primaryGaps\": [\n      \"Database technology specification (PostgreSQL, MySQL, MongoDB, etc.)\",\n      \"Environment type and high availability requirements\",\n      \"Storage and performance characteristics\",\n      \"Security and compliance requirements\",\n      \"Backup and disaster recovery strategy\"\n    ],\n    \"recommendedFocus\": \"First identify which database technology to deploy, as this fundamental decision drives all other configuration choices including storage, networking, backup strategies, and operational patterns\"\n  },\n  \"intentQuality\": {\n    \"currentSpecificity\": \"Very low - the intent identifies the general goal (database deployment) but lacks all implementation details necessary for creating a production-ready deployment\",\n    \"strengthAreas\": [\n      \"Clear action (deploy)\",\n      \"Clear resource type (database)\"\n    ],\n    \"improvementAreas\": [\n      \"No database technology specified - completely ambiguous which engine to deploy\",\n      \"No environment context - unknown if production, development, or testing\",\n      \"No availability requirements - unclear if single instance or highly available cluster needed\",\n      \"No capacity planning information - storage, compute, and performance requirements unknown\",\n      \"No operational context - backup, monitoring, security, and compliance requirements unspecified\",\n      \"No integration details - client access patterns and existing infrastructure unknown\",\n      \"No organizational context - ownership, lifecycle management, and governance requirements missing\"\n    ]\n  }\n}\n```","performance":{"duration_ms":54887,"input_tokens":833,"output_tokens":3158,"total_tokens":3991,"sdk":"vercel","model_version":"claude-sonnet-4-5-20250929","iterations":1,"tool_calls_executed":0,"cache_read_tokens":0,"cache_creation_tokens":0},"metadata":{"timestamp":"2025-10-11T21:13:16.376Z","complexity":"medium","tags":["troubleshooting"],"source":"integration_test","tool":"recommend","test_scenario":"recommend-intent-analysis","failure_analysis":""}}
