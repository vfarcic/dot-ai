{"input":{"issue":"Tool execution scenario"},"output":"{\n  \"required\": [\n    {\n      \"id\": \"name\",\n      \"question\": \"What is the name for this deployment?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., pg-prod\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$\"\n      },\n      \"suggestedAnswer\": \"pg-prod\"\n    },\n    {\n      \"id\": \"namespace\",\n      \"question\": \"Which namespace should these resources be created in?\",\n      \"type\": \"select\",\n      \"options\": [\n        \"cnpg-system\",\n        \"default\",\n        \"kube-node-lease\",\n        \"kube-public\",\n        \"kube-system\",\n        \"kyverno\",\n        \"local-path-storage\"\n      ],\n      \"placeholder\": \"Select a namespace\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"default\"\n    },\n    {\n      \"id\": \"instances\",\n      \"question\": \"How many PostgreSQL instances (pods) do you want in the HA cluster?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 3\",\n      \"validation\": {\n        \"required\": true,\n        \"min\": 1,\n        \"max\": 9\n      },\n      \"suggestedAnswer\": 3\n    },\n    {\n      \"id\": \"storage-size\",\n      \"question\": \"What persistent storage size should each PostgreSQL instance have?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 100Gi\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[1-9][0-9]*Gi$\"\n      },\n      \"suggestedAnswer\": \"100Gi\"\n    },\n    {\n      \"id\": \"storage-class\",\n      \"question\": \"Select the StorageClass for the PostgreSQL data volume (spec.storage.storageClass).\",\n      \"type\": \"select\",\n      \"options\": [\n        \"standard\"\n      ],\n      \"placeholder\": \"Choose a StorageClass\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"standard\"\n    },\n    {\n      \"id\": \"database\",\n      \"question\": \"What is the name of the application database to create (spec.bootstrap.initdb.database)?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., appdb\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[A-Za-z_][A-Za-z0-9_]*$\"\n      },\n      \"suggestedAnswer\": \"appdb\"\n    },\n    {\n      \"id\": \"db-owner\",\n      \"question\": \"What is the owner role/user for the application database (spec.bootstrap.initdb.owner)?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., appuser\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[A-Za-z_][A-Za-z0-9_]*$\"\n      },\n      \"suggestedAnswer\": \"appuser\"\n    }\n  ],\n  \"basic\": [\n    {\n      \"id\": \"sync-standbys\",\n      \"question\": \"How many synchronous standbys should be required (spec.minSyncReplicas/spec.maxSyncReplicas)?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 1 (for 3 instances)\",\n      \"validation\": {\n        \"required\": true,\n        \"min\": 0,\n        \"max\": 5\n      },\n      \"suggestedAnswer\": 1\n    },\n    {\n      \"id\": \"pgbouncer-enabled\",\n      \"question\": \"Enable PgBouncer connection pooling (create Pooler)?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"true or false\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": true\n    },\n    {\n      \"id\": \"pgbouncer-instances\",\n      \"question\": \"How many PgBouncer instances (pods) should run (Pooler.spec.instances)?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 2\",\n      \"validation\": {\n        \"required\": true,\n        \"min\": 1,\n        \"max\": 10\n      },\n      \"suggestedAnswer\": 2\n    },\n    {\n      \"id\": \"pgbouncer-pool-mode\",\n      \"question\": \"Select PgBouncer pool mode (Pooler.spec.pgbouncer.poolMode).\",\n      \"type\": \"select\",\n      \"options\": [\n        \"transaction\",\n        \"session\"\n      ],\n      \"placeholder\": \"Choose pooling mode\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"transaction\"\n    },\n    {\n      \"id\": \"service-type\",\n      \"question\": \"What Service type should be used to expose the connection endpoint (Service.spec.type)?\",\n      \"type\": \"select\",\n      \"options\": [\n        \"ClusterIP\",\n        \"LoadBalancer\",\n        \"NodePort\"\n      ],\n      \"placeholder\": \"Select access type\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"ClusterIP\"\n    },\n    {\n      \"id\": \"backups-enabled\",\n      \"question\": \"Enable continuous backups and PITR to object storage (spec.backup.barmanObjectStore)?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"true or false\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": true\n    },\n    {\n      \"id\": \"backup-provider\",\n      \"question\": \"Choose the backup object storage provider for Barman (spec.backup.barmanObjectStore).\",\n      \"type\": \"select\",\n      \"options\": [\n        \"s3\",\n        \"gcs\",\n        \"azure\"\n      ],\n      \"placeholder\": \"Select provider\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"s3\"\n    },\n    {\n      \"id\": \"backup-destination\",\n      \"question\": \"Destination path for backups (spec.backup.barmanObjectStore.destinationPath).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., s3://my-bucket/pg/cluster\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"s3://my-bucket/pg/pg-prod\"\n    },\n    {\n      \"id\": \"backup-schedule\",\n      \"question\": \"Backup schedule as a Cron expression (ScheduledBackup.spec.schedule).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 0 2 * * * (daily at 02:00)\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^(@(annually|yearly|monthly|weekly|daily|hourly|reboot))|((\\\\S+\\\\s+){4}\\\\S+)$\"\n      },\n      \"suggestedAnswer\": \"0 2 * * *\"\n    },\n    {\n      \"id\": \"retention-policy\",\n      \"question\": \"Backup retention policy (spec.backup.retentionPolicy, Barman format).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 30d (keep 30 days)\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"30d\"\n    },\n    {\n      \"id\": \"s3-secret-name\",\n      \"question\": \"Name of the Secret to store S3 credentials (referenced by spec.backup.barmanObjectStore.s3Credentials.*.name).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., pg-backup-s3\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$\"\n      },\n      \"suggestedAnswer\": \"pg-backup-s3\"\n    },\n    {\n      \"id\": \"s3-region\",\n      \"question\": \"AWS region for S3 (used via s3Credentials.region).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., us-east-1\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"us-east-1\"\n    },\n    {\n      \"id\": \"s3-endpoint\",\n      \"question\": \"Custom S3-compatible endpoint URL (spec.backup.barmanObjectStore.endpointURL), if not AWS.\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., https://s3.my-cloud.local\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"\"\n    },\n    {\n      \"id\": \"s3-access-key-id\",\n      \"question\": \"S3 Access Key ID value (to be stored in the Secret key used by s3Credentials.accessKeyId).\",\n      \"type\": \"text\",\n      \"placeholder\": \"Your AWS_ACCESS_KEY_ID\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"AKIAEXAMPLEID1234\"\n    },\n    {\n      \"id\": \"s3-secret-access-key\",\n      \"question\": \"S3 Secret Access Key value (to be stored in the Secret key used by s3Credentials.secretAccessKey).\",\n      \"type\": \"text\",\n      \"placeholder\": \"Your AWS_SECRET_ACCESS_KEY\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"REDACTED-SECRET-KEY\"\n    },\n    {\n      \"id\": \"networkpolicy-enabled\",\n      \"question\": \"Restrict database access with a NetworkPolicy?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"true or false\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": true\n    },\n    {\n      \"id\": \"allowed-namespaces\",\n      \"question\": \"Which namespaces should be allowed to connect to the database (NetworkPolicy ingress)?\",\n      \"type\": \"multiselect\",\n      \"options\": [\n        \"cnpg-system\",\n        \"default\",\n        \"kube-node-lease\",\n        \"kube-public\",\n        \"kube-system\",\n        \"kyverno\",\n        \"local-path-storage\"\n      ],\n      \"placeholder\": \"Select allowed namespaces\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": [\n        \"default\"\n      ]\n    },\n    {\n      \"id\": \"pdb-min-available\",\n      \"question\": \"Minimum number of PostgreSQL pods that must be available during voluntary disruptions (PodDisruptionBudget.spec.minAvailable).\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 2 (for a 3-node cluster)\",\n      \"validation\": {\n        \"required\": false,\n        \"min\": 1,\n        \"max\": 10\n      },\n      \"suggestedAnswer\": 2\n    }\n  ],\n  \"advanced\": [\n    {\n      \"id\": \"wal-size\",\n      \"question\": \"Optional dedicated WAL volume size (spec.walStorage.size). Leave blank to use main volume.\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 10Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^$|^[1-9][0-9]*Gi$\"\n      },\n      \"suggestedAnswer\": \"\"\n    },\n    {\n      \"id\": \"enable-superuser-access\",\n      \"question\": \"Allow direct superuser access (spec.enableSuperuserAccess)?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"true or false\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": false\n    },\n    {\n      \"id\": \"pod-anti-affinity\",\n      \"question\": \"Enable Pod anti-affinity to spread PostgreSQL instances across nodes (spec.affinity.enablePodAntiAffinity)?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"true or false\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": true\n    },\n    {\n      \"id\": \"postgres-shared-buffers\",\n      \"question\": \"PostgreSQL shared_buffers setting (spec.postgresql.parameters.shared_buffers).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 512MB\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^$|^[0-9]+(kB|MB|GB)$\"\n      },\n      \"suggestedAnswer\": \"512MB\"\n    },\n    {\n      \"id\": \"postgres-max-connections\",\n      \"question\": \"PostgreSQL max_connections (spec.postgresql.parameters.max_connections).\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 200\",\n      \"validation\": {\n        \"required\": false,\n        \"min\": 20,\n        \"max\": 10000\n      },\n      \"suggestedAnswer\": 200\n    },\n    {\n      \"id\": \"resources-cpu-request\",\n      \"question\": \"CPU request for PostgreSQL pods (spec.resources.requests.cpu).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 500m\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^$|^[0-9]+m$|^[0-9]+(\\\\.[0-9]+)?$\"\n      },\n      \"suggestedAnswer\": \"1000m\"\n    },\n    {\n      \"id\": \"resources-mem-request\",\n      \"question\": \"Memory request for PostgreSQL pods (spec.resources.requests.memory).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 2Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^$|^[1-9][0-9]*Mi$|^[1-9][0-9]*Gi$\"\n      },\n      \"suggestedAnswer\": \"2Gi\"\n    },\n    {\n      \"id\": \"resources-cpu-limit\",\n      \"question\": \"CPU limit for PostgreSQL pods (spec.resources.limits.cpu).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 2 (cores) or 2000m\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^$|^[0-9]+m$|^[0-9]+(\\\\.[0-9]+)?$\"\n      },\n      \"suggestedAnswer\": \"2\"\n    },\n    {\n      \"id\": \"resources-mem-limit\",\n      \"question\": \"Memory limit for PostgreSQL pods (spec.resources.limits.memory).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 4Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^$|^[1-9][0-9]*Mi$|^[1-9][0-9]*Gi$\"\n      },\n      \"suggestedAnswer\": \"4Gi\"\n    },\n    {\n      \"id\": \"backup-encryption\",\n      \"question\": \"Enable server-side encryption for backups (spec.backup.barmanObjectStore.data.encryption).\",\n      \"type\": \"select\",\n      \"options\": [\n        \"AES256\",\n        \"aws:kms\",\n        \"\"\n      ],\n      \"placeholder\": \"Select encryption or leave blank\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"AES256\"\n    },\n    {\n      \"id\": \"backup-compression\",\n      \"question\": \"Compression for backup data (spec.backup.barmanObjectStore.data.compression).\",\n      \"type\": \"select\",\n      \"options\": [\n        \"gzip\",\n        \"bzip2\",\n        \"snappy\",\n        \"\"\n      ],\n      \"placeholder\": \"Select compression or leave blank\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"gzip\"\n    },\n    {\n      \"id\": \"wal-compression\",\n      \"question\": \"Compression for WAL archiving (spec.backup.barmanObjectStore.wal.compression).\",\n      \"type\": \"select\",\n      \"options\": [\n        \"gzip\",\n        \"bzip2\",\n        \"snappy\",\n        \"\"\n      ],\n      \"placeholder\": \"Select WAL compression or leave blank\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"gzip\"\n    },\n    {\n      \"id\": \"monitoring-podmonitor\",\n      \"question\": \"Enable PodMonitor for metrics (spec.monitoring.enablePodMonitor)?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"true or false\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": false\n    },\n    {\n      \"id\": \"image-name\",\n      \"question\": \"Override the PostgreSQL image (spec.imageName). Leave blank to use operator default.\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., ghcr.io/cloudnative-pg/postgresql:16\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"\"\n    },\n    {\n      \"id\": \"primary-update-method\",\n      \"question\": \"Primary update method during changes (spec.primaryUpdateMethod).\",\n      \"type\": \"select\",\n      \"options\": [\n        \"switchover\",\n        \"restart\"\n      ],\n      \"placeholder\": \"Choose how to update the primary\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"switchover\"\n    },\n    {\n      \"id\": \"pg-hba-extra\",\n      \"question\": \"Additional pg_hba.conf lines to append (spec.postgresql.pg_hba).\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., host all all 10.0.0.0/8 md5\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"\"\n    }\n  ],\n  \"open\": {\n    \"question\": \"Is there anything else about your requirements or constraints that would help us provide better recommendations?\",\n    \"placeholder\": \"e.g., specific security requirements, performance needs, existing infrastructure constraints...\"\n  }\n}","performance":{"duration_ms":150502,"input_tokens":17733,"output_tokens":7089,"total_tokens":24822,"sdk":"vercel","model_version":"gpt-5","iterations":1,"tool_calls_executed":0,"cache_read_tokens":0,"cache_creation_tokens":0},"metadata":{"timestamp":"2025-10-11T21:26:22.471Z","complexity":"medium","tags":["troubleshooting"],"source":"integration_test","tool":"recommend","test_scenario":"recommend-question-generation","failure_analysis":""}}
