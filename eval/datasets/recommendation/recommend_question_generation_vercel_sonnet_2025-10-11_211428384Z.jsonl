{"input":{"issue":"Tool execution scenario"},"output":"```json\n{\n  \"required\": [\n    {\n      \"id\": \"name\",\n      \"question\": \"What name would you like for your PostgreSQL cluster?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., my-postgres\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$\"\n      },\n      \"suggestedAnswer\": \"postgres-cluster\"\n    },\n    {\n      \"id\": \"namespace\",\n      \"question\": \"Which namespace should the PostgreSQL cluster be deployed to?\",\n      \"type\": \"select\",\n      \"options\": [\"cnpg-system\", \"default\", \"kube-node-lease\", \"kube-public\", \"kube-system\", \"kyverno\", \"local-path-storage\"],\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"default\"\n    },\n    {\n      \"id\": \"instances\",\n      \"question\": \"How many PostgreSQL instances do you want for high availability?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 3\",\n      \"hint\": \"More instances provide better availability. Minimum 1 for single instance, 3 recommended for HA.\",\n      \"validation\": {\n        \"required\": true,\n        \"min\": 1,\n        \"max\": 10\n      },\n      \"suggestedAnswer\": \"3\"\n    },\n    {\n      \"id\": \"storage-size\",\n      \"question\": \"How much storage do you need for the database?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 10Gi\",\n      \"hint\": \"Specify size with units like Gi (gibibytes) or Ti (tebibytes)\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[0-9]+(Gi|Ti|Mi)$\"\n      },\n      \"suggestedAnswer\": \"10Gi\"\n    }\n  ],\n  \"basic\": [\n    {\n      \"id\": \"database-name\",\n      \"question\": \"What should be the name of the initial database?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., app_db\",\n      \"hint\": \"Database name to be created during initialization\",\n      \"validation\": {\n        \"pattern\": \"^[a-zA-Z_][a-zA-Z0-9_]*$\"\n      },\n      \"suggestedAnswer\": \"app_db\"\n    },\n    {\n      \"id\": \"database-owner\",\n      \"question\": \"What username should own the initial database?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., app_user\",\n      \"hint\": \"Owner of the initial database\",\n      \"validation\": {\n        \"pattern\": \"^[a-zA-Z_][a-zA-Z0-9_]*$\"\n      },\n      \"suggestedAnswer\": \"app_user\"\n    },\n    {\n      \"id\": \"postgres-version\",\n      \"question\": \"Which PostgreSQL version would you like to use?\",\n      \"type\": \"select\",\n      \"options\": [\"16\", \"15\", \"14\", \"13\"],\n      \"hint\": \"PostgreSQL major version - latest stable version recommended\",\n      \"suggestedAnswer\": \"16\"\n    },\n    {\n      \"id\": \"enable-backups\",\n      \"question\": \"Do you want to enable automated backups?\",\n      \"type\": \"boolean\",\n      \"hint\": \"Backups protect your data and enable point-in-time recovery\",\n      \"suggestedAnswer\": \"true\"\n    },\n    {\n      \"id\": \"backup-retention\",\n      \"question\": \"How long should backups be retained?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 30d\",\n      \"hint\": \"Specify retention like: 7d (days), 4w (weeks), 6m (months)\",\n      \"validation\": {\n        \"pattern\": \"^[0-9]+(d|w|m|y)$\"\n      },\n      \"suggestedAnswer\": \"30d\"\n    },\n    {\n      \"id\": \"min-sync-replicas\",\n      \"question\": \"How many synchronous replicas are required for writes?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 0\",\n      \"hint\": \"0 for async replication, 1+ for sync. Sync provides stronger consistency but may impact performance.\",\n      \"validation\": {\n        \"min\": 0,\n        \"max\": 5\n      },\n      \"suggestedAnswer\": \"0\"\n    },\n    {\n      \"id\": \"max-sync-replicas\",\n      \"question\": \"What's the maximum number of synchronous replicas?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 0\",\n      \"hint\": \"Maximum replicas that can participate in synchronous replication\",\n      \"validation\": {\n        \"min\": 0,\n        \"max\": 5\n      },\n      \"suggestedAnswer\": \"0\"\n    },\n    {\n      \"id\": \"enable-superuser-access\",\n      \"question\": \"Enable superuser access to the database?\",\n      \"type\": \"boolean\",\n      \"hint\": \"Allows access to the postgres superuser. Disable for enhanced security in production.\",\n      \"suggestedAnswer\": \"false\"\n    }\n  ],\n  \"advanced\": [\n    {\n      \"id\": \"storage-class\",\n      \"question\": \"Which storage class should be used for data storage?\",\n      \"type\": \"select\",\n      \"options\": [\"standard\", \"default\"],\n      \"hint\": \"Storage class for persistent volumes\",\n      \"suggestedAnswer\": \"standard\"\n    },\n    {\n      \"id\": \"wal-storage-size\",\n      \"question\": \"How much dedicated storage for WAL (Write-Ahead Log)?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 5Gi\",\n      \"hint\": \"Separate storage for WAL can improve performance. Leave empty to store WAL with data.\",\n      \"validation\": {\n        \"pattern\": \"^([0-9]+(Gi|Ti|Mi))?$\"\n      },\n      \"suggestedAnswer\": \"5Gi\"\n    },\n    {\n      \"id\": \"enable-pod-monitor\",\n      \"question\": \"Enable Prometheus PodMonitor for metrics?\",\n      \"type\": \"boolean\",\n      \"hint\": \"Creates PodMonitor resource for Prometheus to scrape metrics\",\n      \"suggestedAnswer\": \"false\"\n    },\n    {\n      \"id\": \"cpu-requests\",\n      \"question\": \"CPU requests for PostgreSQL pods?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 500m\",\n      \"hint\": \"Guaranteed CPU allocation. Use 'm' for millicores (e.g., 500m = 0.5 CPU)\",\n      \"validation\": {\n        \"pattern\": \"^[0-9]+(m|\\\\.[0-9]+)?$\"\n      },\n      \"suggestedAnswer\": \"500m\"\n    },\n    {\n      \"id\": \"cpu-limits\",\n      \"question\": \"CPU limits for PostgreSQL pods?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 2\",\n      \"hint\": \"Maximum CPU allocation\",\n      \"validation\": {\n        \"pattern\": \"^[0-9]+(m|\\\\.[0-9]+)?$\"\n      },\n      \"suggestedAnswer\": \"2\"\n    },\n    {\n      \"id\": \"memory-requests\",\n      \"question\": \"Memory requests for PostgreSQL pods?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 512Mi\",\n      \"hint\": \"Guaranteed memory allocation\",\n      \"validation\": {\n        \"pattern\": \"^[0-9]+(Mi|Gi)$\"\n      },\n      \"suggestedAnswer\": \"512Mi\"\n    },\n    {\n      \"id\": \"memory-limits\",\n      \"question\": \"Memory limits for PostgreSQL pods?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 2Gi\",\n      \"hint\": \"Maximum memory allocation\",\n      \"validation\": {\n        \"pattern\": \"^[0-9]+(Mi|Gi)$\"\n      },\n      \"suggestedAnswer\": \"2Gi\"\n    },\n    {\n      \"id\": \"backup-compression\",\n      \"question\": \"Which compression algorithm for backups?\",\n      \"type\": \"select\",\n      \"options\": [\"gzip\", \"bzip2\", \"snappy\", \"none\"],\n      \"hint\": \"Compression reduces storage costs but increases CPU usage\",\n      \"suggestedAnswer\": \"gzip\"\n    },\n    {\n      \"id\": \"backup-encryption\",\n      \"question\": \"Backup encryption method (S3/Azure)?\",\n      \"type\": \"select\",\n      \"options\": [\"AES256\", \"aws:kms\", \"none\"],\n      \"hint\": \"Only applicable when using S3 or Azure for backups\",\n      \"suggestedAnswer\": \"AES256\"\n    },\n    {\n      \"id\": \"shared-preload-libraries\",\n      \"question\": \"Which PostgreSQL extensions should be preloaded?\",\n      \"type\": \"multiselect\",\n      \"options\": [\"pg_stat_statements\", \"auto_explain\", \"pgaudit\", \"pg_cron\"],\n      \"hint\": \"Extensions loaded at server startup. Common ones: pg_stat_statements for query stats, pgaudit for auditing\",\n      \"suggestedAnswer\": [\"pg_stat_statements\"]\n    },\n    {\n      \"id\": \"enable-pod-anti-affinity\",\n      \"question\": \"Enable pod anti-affinity to spread instances across nodes?\",\n      \"type\": \"boolean\",\n      \"hint\": \"Distributes PostgreSQL instances across different nodes for better availability\",\n      \"suggestedAnswer\": \"true\"\n    },\n    {\n      \"id\": \"pod-anti-affinity-type\",\n      \"question\": \"What type of pod anti-affinity should be used?\",\n      \"type\": \"select\",\n      \"options\": [\"preferred\", \"required\"],\n      \"hint\": \"Required enforces strict separation (may prevent scheduling), preferred is best-effort\",\n      \"suggestedAnswer\": \"preferred\"\n    },\n    {\n      \"id\": \"primary-update-strategy\",\n      \"question\": \"How should primary instance updates be handled?\",\n      \"type\": \"select\",\n      \"options\": [\"unsupervised\", \"supervised\"],\n      \"hint\": \"Unsupervised allows automatic updates, supervised requires manual intervention\",\n      \"suggestedAnswer\": \"unsupervised\"\n    },\n    {\n      \"id\": \"log-level\",\n      \"question\": \"What logging level should PostgreSQL use?\",\n      \"type\": \"select\",\n      \"options\": [\"error\", \"warning\", \"info\", \"debug\"],\n      \"hint\": \"Higher levels provide more detail but generate more logs\",\n      \"suggestedAnswer\": \"info\"\n    },\n    {\n      \"id\": \"max-connections\",\n      \"question\": \"Maximum number of database connections?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 100\",\n      \"hint\": \"PostgreSQL max_connections parameter. Consider your workload and available memory.\",\n      \"validation\": {\n        \"min\": 10,\n        \"max\": 1000\n      },\n      \"suggestedAnswer\": \"100\"\n    },\n    {\n      \"id\": \"shared-buffers\",\n      \"question\": \"PostgreSQL shared_buffers size?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 256MB\",\n      \"hint\": \"Memory for caching data. Typically 25% of total RAM. Use MB or GB units.\",\n      \"validation\": {\n        \"pattern\": \"^[0-9]+(MB|GB)$\"\n      },\n      \"suggestedAnswer\": \"256MB\"\n    },\n    {\n      \"id\": \"work-mem\",\n      \"question\": \"PostgreSQL work_mem per operation?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 4MB\",\n      \"hint\": \"Memory for sorting and hash operations. Total memory = work_mem × max_connections × 2-3\",\n      \"validation\": {\n        \"pattern\": \"^[0-9]+(MB|GB|kB)$\"\n      },\n      \"suggestedAnswer\": \"4MB\"\n    },\n    {\n      \"id\": \"enable-data-checksums\",\n      \"question\": \"Enable data checksums for corruption detection?\",\n      \"type\": \"boolean\",\n      \"hint\": \"Detects corruption but adds ~5% performance overhead. Cannot be changed after initialization.\",\n      \"suggestedAnswer\": \"true\"\n    },\n    {\n      \"id\": \"postgres-uid\",\n      \"question\": \"Custom UID for postgres user (leave empty for default)?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 26\",\n      \"hint\": \"Useful for matching existing file permissions or security policies\",\n      \"validation\": {\n        \"min\": 1,\n        \"max\": 65535\n      },\n      \"suggestedAnswer\": \"26\"\n    },\n    {\n      \"id\": \"postgres-gid\",\n      \"question\": \"Custom GID for postgres group (leave empty for default)?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 26\",\n      \"hint\": \"Useful for matching existing file permissions or security policies\",\n      \"validation\": {\n        \"min\": 1,\n        \"max\": 65535\n      },\n      \"suggestedAnswer\": \"26\"\n    }\n  ],\n  \"open\": {\n    \"question\": \"Is there anything else about your PostgreSQL requirements that would help us configure your cluster better?\",\n    \"placeholder\": \"e.g., specific performance requirements, compliance needs, existing database to migrate from, specific PostgreSQL extensions needed, backup destinations (S3/Azure/GCS), connection pooling requirements, read replica configurations...\"\n  }\n}\n```","performance":{"duration_ms":44003,"input_tokens":10268,"output_tokens":3453,"total_tokens":13721,"sdk":"vercel","model_version":"claude-sonnet-4-5-20250929","iterations":1,"tool_calls_executed":0,"cache_read_tokens":0,"cache_creation_tokens":0},"metadata":{"timestamp":"2025-10-11T21:14:28.384Z","complexity":"medium","tags":["troubleshooting"],"source":"integration_test","tool":"recommend","test_scenario":"recommend-question-generation","failure_analysis":""}}
