{"input":{"issue":"Tool execution scenario"},"output":"```json\n{\n  \"required\": [\n    {\n      \"id\": \"name\",\n      \"question\": \"What is the name for your PostgreSQL deployment?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., my-postgres\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$\"\n      },\n      \"suggestedAnswer\": \"production-postgres\"\n    },\n    {\n      \"id\": \"namespace\",\n      \"question\": \"Which namespace should the PostgreSQL cluster be deployed to?\",\n      \"type\": \"select\",\n      \"options\": [\"cnpg-system\", \"default\", \"kube-node-lease\", \"kube-public\", \"kube-system\", \"kyverno\", \"local-path-storage\"],\n      \"placeholder\": \"Select a namespace\",\n      \"validation\": {\n        \"required\": true\n      },\n      \"suggestedAnswer\": \"default\"\n    },\n    {\n      \"id\": \"instances\",\n      \"question\": \"How many PostgreSQL instances do you need for high availability?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 3\",\n      \"validation\": {\n        \"required\": true,\n        \"min\": 1,\n        \"max\": 10\n      },\n      \"suggestedAnswer\": \"3\"\n    },\n    {\n      \"id\": \"storage-size\",\n      \"question\": \"How much storage do you need for the database?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 10Gi, 100Gi, 1Ti\",\n      \"validation\": {\n        \"required\": true,\n        \"pattern\": \"^[0-9]+(Gi|Ti|Mi)$\"\n      },\n      \"suggestedAnswer\": \"20Gi\"\n    }\n  ],\n  \"basic\": [\n    {\n      \"id\": \"pooler-instances\",\n      \"question\": \"How many connection pooler instances do you want?\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 2\",\n      \"validation\": {\n        \"required\": false,\n        \"min\": 1,\n        \"max\": 5\n      },\n      \"suggestedAnswer\": \"2\"\n    },\n    {\n      \"id\": \"pooler-mode\",\n      \"question\": \"What connection pooling mode should be used?\",\n      \"type\": \"select\",\n      \"options\": [\"transaction\", \"session\"],\n      \"placeholder\": \"Select pooling mode\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"transaction\"\n    },\n    {\n      \"id\": \"backup-schedule\",\n      \"question\": \"What schedule should be used for automated backups?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 0 2 * * * (2 AM daily), 0 0 * * 0 (weekly)\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^(@(annually|yearly|monthly|weekly|daily|hourly|reboot))|(@every (\\\\d+(ns|us|Âµs|ms|s|m|h))+)|((((\\\\d+,)+\\\\d+|(\\\\d+([/\\\\-])\\\\d+)|\\\\d+|\\\\*) ?){5,7})$\"\n      },\n      \"suggestedAnswer\": \"0 2 * * *\"\n    },\n    {\n      \"id\": \"backup-retention\",\n      \"question\": \"How long should backups be retained?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 30d, 7d, 90d\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+[dwy]$\"\n      },\n      \"suggestedAnswer\": \"30d\"\n    },\n    {\n      \"id\": \"postgres-database\",\n      \"question\": \"What is the name of the initial database to create?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., app, myapp, production\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[a-zA-Z_][a-zA-Z0-9_]*$\"\n      },\n      \"suggestedAnswer\": \"app\"\n    },\n    {\n      \"id\": \"postgres-owner\",\n      \"question\": \"What username should own the initial database?\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., appuser, dbuser\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[a-zA-Z_][a-zA-Z0-9_]*$\"\n      },\n      \"suggestedAnswer\": \"app\"\n    },\n    {\n      \"id\": \"enable-superuser\",\n      \"question\": \"Do you need superuser access enabled?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"Enable for administrative tasks\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"false\"\n    }\n  ],\n  \"advanced\": [\n    {\n      \"id\": \"storage-class\",\n      \"question\": \"Which storage class should be used for the database volumes?\",\n      \"type\": \"select\",\n      \"options\": [\"standard\"],\n      \"placeholder\": \"Select storage class\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"standard\"\n    },\n    {\n      \"id\": \"wal-storage-size\",\n      \"question\": \"How much storage for Write-Ahead Logs (WAL)? Leave empty to use main storage.\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 5Gi, 10Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(Gi|Ti|Mi)$\"\n      },\n      \"suggestedAnswer\": \"5Gi\"\n    },\n    {\n      \"id\": \"max-sync-replicas\",\n      \"question\": \"Maximum number of synchronous replicas (0 for async replication)\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 0, 1, 2\",\n      \"validation\": {\n        \"required\": false,\n        \"min\": 0,\n        \"max\": 5\n      },\n      \"suggestedAnswer\": \"0\"\n    },\n    {\n      \"id\": \"min-sync-replicas\",\n      \"question\": \"Minimum number of synchronous replicas\",\n      \"type\": \"number\",\n      \"placeholder\": \"e.g., 0, 1\",\n      \"validation\": {\n        \"required\": false,\n        \"min\": 0,\n        \"max\": 5\n      },\n      \"suggestedAnswer\": \"0\"\n    },\n    {\n      \"id\": \"backup-compression\",\n      \"question\": \"What compression should be used for backups?\",\n      \"type\": \"select\",\n      \"options\": [\"gzip\", \"bzip2\", \"snappy\", \"none\"],\n      \"placeholder\": \"Select compression type\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"gzip\"\n    },\n    {\n      \"id\": \"postgres-shared-preload-libraries\",\n      \"question\": \"Which PostgreSQL extensions should be preloaded? (comma-separated)\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., pg_stat_statements,auto_explain\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"pg_stat_statements\"\n    },\n    {\n      \"id\": \"cpu-requests\",\n      \"question\": \"CPU resource request per instance\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 500m, 1, 2\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(m|\\\\.[0-9]+)?$\"\n      },\n      \"suggestedAnswer\": \"500m\"\n    },\n    {\n      \"id\": \"cpu-limits\",\n      \"question\": \"CPU resource limit per instance\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 1, 2, 4\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(m|\\\\.[0-9]+)?$\"\n      },\n      \"suggestedAnswer\": \"2\"\n    },\n    {\n      \"id\": \"memory-requests\",\n      \"question\": \"Memory resource request per instance\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 512Mi, 1Gi, 2Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(Mi|Gi)$\"\n      },\n      \"suggestedAnswer\": \"1Gi\"\n    },\n    {\n      \"id\": \"memory-limits\",\n      \"question\": \"Memory resource limit per instance\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., 2Gi, 4Gi, 8Gi\",\n      \"validation\": {\n        \"required\": false,\n        \"pattern\": \"^[0-9]+(Mi|Gi)$\"\n      },\n      \"suggestedAnswer\": \"4Gi\"\n    },\n    {\n      \"id\": \"enable-pod-monitor\",\n      \"question\": \"Enable Prometheus PodMonitor for metrics collection?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"Enable if using Prometheus Operator\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"true\"\n    },\n    {\n      \"id\": \"primary-update-strategy\",\n      \"question\": \"How should primary instance updates be handled?\",\n      \"type\": \"select\",\n      \"options\": [\"unsupervised\", \"supervised\"],\n      \"placeholder\": \"Select update strategy\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"unsupervised\"\n    },\n    {\n      \"id\": \"log-level\",\n      \"question\": \"What log level should PostgreSQL use?\",\n      \"type\": \"select\",\n      \"options\": [\"error\", \"warning\", \"info\", \"debug\"],\n      \"placeholder\": \"Select log level\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"info\"\n    },\n    {\n      \"id\": \"enable-pod-anti-affinity\",\n      \"question\": \"Enable pod anti-affinity to spread instances across nodes?\",\n      \"type\": \"boolean\",\n      \"placeholder\": \"Recommended for production\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"true\"\n    },\n    {\n      \"id\": \"postgres-parameters\",\n      \"question\": \"Custom PostgreSQL parameters (JSON format, e.g., {\\\"max_connections\\\": \\\"200\\\"})\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., {\\\"max_connections\\\": \\\"200\\\", \\\"shared_buffers\\\": \\\"256MB\\\"}\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"{\\\"max_connections\\\": \\\"200\\\"}\"\n    },\n    {\n      \"id\": \"pgbouncer-parameters\",\n      \"question\": \"Custom PgBouncer parameters (JSON format, e.g., {\\\"max_client_conn\\\": \\\"1000\\\"})\",\n      \"type\": \"text\",\n      \"placeholder\": \"e.g., {\\\"max_client_conn\\\": \\\"1000\\\", \\\"default_pool_size\\\": \\\"25\\\"}\",\n      \"validation\": {\n        \"required\": false\n      },\n      \"suggestedAnswer\": \"{\\\"max_client_conn\\\": \\\"1000\\\"}\"\n    }\n  ],\n  \"open\": {\n    \"question\": \"Is there anything else about your PostgreSQL requirements or constraints that would help us provide better recommendations?\",\n    \"placeholder\": \"e.g., specific backup destination (S3/Azure/GCS), point-in-time recovery needs, connection limits, replication requirements, security constraints, existing infrastructure integration...\"\n  }\n}\n```","performance":{"duration_ms":35592,"input_tokens":19773,"output_tokens":3024,"total_tokens":22797,"sdk":"vercel","model_version":"claude-sonnet-4-5-20250929","iterations":1,"tool_calls_executed":0,"cache_read_tokens":0,"cache_creation_tokens":0},"metadata":{"timestamp":"2025-10-11T21:15:04.933Z","complexity":"medium","tags":["troubleshooting"],"source":"integration_test","tool":"recommend","test_scenario":"recommend-question-generation","failure_analysis":""}}
